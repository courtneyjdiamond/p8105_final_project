<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data Sources and Overview</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data_source.html">Data Sources</a>
</li>
<li>
  <a href="analysis.html">Analysis</a>
</li>
<li>
  <a href="project_report.html">Project Report</a>
</li>
<li>
  <a href="about_us.html">About Us</a>
</li>
<li>
  <a href="mailto:&lt;you@youremail.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/courtneyjdiamond/p8105_final_project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://citibikenyc.com/">
    <span class="fa fa-solid fa-bicycle"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore"><span style="color: blue;">Data Sources and
Overview</span></h1>

</div>


<style>
  h1 {
     font-weight: bold;
  }
</style>
<p> </p>
<hr />
<div id="data-sources" class="section level2">
<h2><span style="color: blue;">Data Sources</span></h2>
<p> </p>
<p><a
href="https://s3.amazonaws.com/tripdata/index.html"><strong>CitiBike
Data</strong></a>: These datasets contain monthly logs of trip,
including ride ID, the user’s status (subscriber or casual user), trip
start/end longitude/latitude coordinates, and the trip start/stop times
and duration.</p>
<p><a
href="https://www.graham-center.org/maps-data-tools/social-deprivation-index.html"><strong>Social
Deprivation Index</strong></a>: The social deprivation index (SDI) is an
effort to generate a scoring system of socioeconomic factors using US
census data from the American Community Survey. The final SDI is a
composite measure of percent living in poverty, percent with less than
12 years of education, percent single-parent households, the percentage
living in rented housing units, the percentage living in the overcrowded
housing unit, percent of households without a car, and percentage
nonemployed adults under 65 years of age. For more details please see
the webpage link.</p>
<p><a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/Subtopic.aspx?theme_code=2,3&amp;subtopic_id=113"><strong>Overweight
Data</strong></a>: This dataset contains publicly available data from
NYC regarding the percent of people who are overweight per area.</p>
<p><a
href="https://data.cityofnewyork.us/Environment/Air-Quality/c3uy-2p5r"><strong>Air
Quality Index Data</strong></a>: These data originated from NYC Open
Data, contributed by the Department of Hygiene and Mental Health and
include air quality indexes measured across boroughs in NYC.</p>
<p> </p>
<hr />
</div>
<div id="individual-data-imports-and-cleaning" class="section level2">
<h2><span style="color: blue;">Individual Data Imports and
Cleaning</span></h2>
<p> </p>
<div id="citibike" class="section level3">
<h3><em>Citibike</em></h3>
<p> </p>
<div id="data-import" class="section level5">
<h5>Data Import</h5>
<p>The citibike data was a collection of csv files that we downloaded
and merged. We were specifically interested in 2019 as this was when SDI
scores were available.</p>
<pre class="r"><code>citibike = 
  tibble(
    files = list.files(&quot;citibike&quot;),
    path = str_c(&quot;citibike/&quot;, files)
  ) |&gt;
  mutate(data = map(path, ~read_csv(.x, col_types = cols(
    &#39;end station id&#39; = col_double(),
    &#39;start station id&#39; = col_double()
  )))) |&gt;
  unnest(cols = c(data))</code></pre>
<pre class="r"><code>citibike |&gt;
  head() |&gt;
  knitr::kable()</code></pre>
<p>(Will not include actual code for now as I cannot figure out how to
knit)</p>
<p>The citibike dataframe includes r nrow(citibike) trips and r
ncol(citibike) variables. The variables in the dataframe are r
names(citibike).</p>
<p> </p>
</div>
<div id="data-cleaning" class="section level5">
<h5>Data Cleaning</h5>
<p>The cleaning of the citibike data included the following steps:</p>
<ul>
<li>Recoding gender from numeric to text</li>
<li>Filtering trip duration to more than 5 minutes but less than 1 day
in order to capture true trips taken</li>
<li>Including trips that started in 2018 but ended in 2019 and trips
that started in 2019 but ended in 2020, so as to include all trips taken
in 2019</li>
<li>Creating an age at time of trip variable from birth year</li>
<li>Creating a trip duration in minutes (as opposed to seconds)
variable</li>
</ul>
<pre class="r"><code>citibike_df &lt;- citibike |&gt;
  janitor::clean_names() |&gt;
  select(-files, -path) |&gt;
  rename(trip_duration_sec = tripduration,
         start_time = starttime,
         stop_time = stoptime,
         user_type = usertype)|&gt;
  mutate(gender = recode(gender,
                         &quot;0&quot; = &quot;Unknown&quot;,
                         &quot;1&quot; = &quot;Male&quot;,
                         &quot;2&quot; = &quot;Female&quot;),
        trip_duration_min = trip_duration_sec / 60,
        age = 2019 - birth_year
        ) |&gt;
  filter(
    trip_duration_sec &gt;= 300,
    trip_duration_sec &lt;= 86400,
    as.Date(stop_time) &gt;= as.Date(&quot;2019-01-01&quot;),
    as.Date(start_time) &lt;= as.Date(&quot;2019-12-31&quot;)
  )  |&gt;
  select(trip_duration_sec, trip_duration_min, everything())</code></pre>
<p>The table below displays the citibike tidied data.</p>
<pre class="r"><code>citibike_df |&gt;
  head() |&gt;
  knitr::kable()</code></pre>
<p>The citibike dataframe includes r nrow(citibike_df) trips and r
ncol(citibike_df) variables. The variables in the dataframe are r
names(citibike_df).</p>
<p> </p>
</div>
</div>
<div id="social-deprivation-index" class="section level3">
<h3><em>Social Deprivation Index</em></h3>
<p> </p>
<div id="data-import-and-cleaning" class="section level5">
<h5>Data Import and Cleaning</h5>
<p>The SDI dataset was a csv. We renamed the zip code variable to be
more intuitive. As we were only interested in the entirety of the SDI
score, we filtered the data to include zip code and sdi_score only.</p>
<ul>
<li>It is important to note that the higher the SDI score the higher the
social deprivation in that area.</li>
</ul>
<pre class="r"><code>SDI_df &lt;- read_csv(&quot;data/SDI_data/rgcsdi-2015-2019-zcta.csv&quot;) |&gt;
  janitor::clean_names() |&gt;
  select(zcta5_fips, sdi_score)|&gt;
  rename(zip=zcta5_fips)</code></pre>
<p>This table shows the zip codes with the least social deprivation (ie
the lowest SDI score).</p>
<pre class="r"><code>SDI_df |&gt;
  arrange(sdi_score) |&gt;  
  head(5) |&gt;
  knitr::kable()</code></pre>
<p> </p>
</div>
</div>
<div id="overweight-data" class="section level3">
<h3><em>Overweight Data</em></h3>
<p> </p>
<div id="data-import-1" class="section level5">
<h5>Data Import</h5>
<p>The overweight data was a csv files that we downloaded and merged. We
were specifically interested in 2019 as this was when SDI scores were
available.</p>
<pre class="r"><code>overweight = read_csv(&#39;./data/SDI_data/nyc_overweight_or_obesity_adults.csv&#39;) |&gt;
    janitor::clean_names()</code></pre>
<p>The overweight dataframe includes r nrow(overweight) trips and r
ncol(overweight) variables. The variables in the dataframe are r
names(overweight).</p>
<p> </p>
</div>
<div id="data-cleaning-1" class="section level5">
<h5>Data Cleaning</h5>
<p>The cleaning of the overweight data included the following steps:</p>
<ul>
<li>Converting percent from a character variable to a numeric
variable</li>
<li>Separating out the high and low confidence intervals of percent</li>
<li>Renaming time to year</li>
<li>Filtering data to 2019</li>
</ul>
<pre class="r"><code>overweight_df =
 overweight |&gt;
  mutate(number = gsub(&quot;\\*&quot;, &quot;&quot;, number)) |&gt;
  mutate(number = gsub(&quot;,&quot;, &quot;&quot;, number)) |&gt;
  mutate(number = as.numeric(number)) |&gt;
  mutate(
    percent_low = as.numeric(gsub(&quot;^.*\\(\\s*&quot;, &quot;&quot;, gsub(&quot;\\s*,.*$&quot;, &quot;&quot;, percent))),
    percent_high = as.numeric(gsub(&quot;^.*\\,\\s*&quot;, &quot;&quot;, gsub(&quot;\\)$&quot;, &quot;&quot;, percent))),
percent = as.numeric(ifelse(grepl(&quot;\\*&quot;, percent),
                                gsub(&quot;\\*.*$&quot;, &quot;&quot;, percent),
                                gsub(&quot;\\s*\\(.*&quot;, &quot;&quot;, percent)))) |&gt;
  rename(year = time)|&gt;
  filter (year == 2019)</code></pre>
<p>The table below displays the overweight tidied data.</p>
<pre class="r"><code>overweight_df |&gt;
  head() |&gt;
  knitr::kable()</code></pre>
<p>The overweight dataframe now includes r nrow(overweight_df) trips and
r ncol(overweight_df) variables. The variables in the dataframe are r
names(overweight_df).</p>
</div>
</div>
<div id="air-quality-index" class="section level3">
<h3><em>Air Quality Index</em></h3>
<p> </p>
<div id="data-import-2" class="section level5">
<h5>Data Import</h5>
<p>The air quality data was a csv files.</p>
<pre class="r"><code>air &lt;- read_csv(&quot;data/air_quality/Air_Quality_20231126.csv&quot;) </code></pre>
<p>The air dataframe includes r nrow(air) trips and r ncol(air)
variables. The variables in the dataframe are r names(air).</p>
<p> </p>
</div>
<div id="data-cleaning-2" class="section level5">
<h5>Data Cleaning</h5>
<p>The cleaning of the air quality index data included the following
steps:</p>
<ul>
<li>Separating out year</li>
<li>Filtering data to 2019</li>
</ul>
<pre class="r"><code> air_quality_df =air |&gt;
  janitor::clean_names() |&gt;
  mutate(
    start_date = mdy(start_date),
    year = year(start_date)
  ) |&gt;
  filter(year == &quot;2019&quot;)</code></pre>
<p>The table below displays the air quality tidied data.</p>
<pre class="r"><code> air_quality_df |&gt;
  head() |&gt;
  knitr::kable()</code></pre>
<p>The air quality dataframe now includes r nrow( air_quality_df) trips
and r ncol( air_quality_df) variables. The variables in the dataframe
are r names( air_quality_df).</p>
<hr />
</div>
</div>
</div>
<div id="data-merging-by-nyc-neighborhood" class="section level2">
<h2><span style="color: blue;">Data Merging by NYC
Neighborhood</span></h2>
<p>Our end goal was to merge data by neighborhood. We decided to use
United Hospital (UHF) 42 codes which consist of 34 adjoining zip codes
with similar characteristics compiled by NYC Gov. We decideded to use
UFH 34 instead of other versions as UFH 34 had the least number of
neighborhoods (contains the largest area per neighborhood)</p>
<ul>
<li>For more information about the background behind UHF codes, please
see <a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-stories/geographies/"><strong>here</strong></a>.</li>
</ul>
<p>To do this, we did the following:</p>
<ol style="list-style-type: decimal">
<li>First we combined United Hospital (UHF) 42 codes to zip codes, as
the overweight dataframe included UHF 42 codes. We found a table that
mapped UFH 42 codes to zip codes from a NYC gov <a
href="https://www.nyc.gov/assets/doh/downloads/pdf/ah/zipcodetable.pdf%60"><strong>pdf</strong></a>.
We imported this table and tidied it into a dataframe.</li>
</ol>
<pre class="r"><code># install.packages(&quot;pdftables&quot;)
# install.packages(&quot;pdftools&quot;)

uhf_zip = 
  pdf_text(&quot;data/geocoding/zipcodetable.pdf&quot;) |&gt; 
  extract(1)

uhf_zip_df =
  uhf_zip |&gt; 
  str_split(&quot;\n&quot;) |&gt;
  tibble() |&gt; 
  rename(&quot;data&quot; = &quot;str_split(uhf_zip, \&quot;\\n\&quot;)&quot;) |&gt; 
  unnest(&quot;data&quot;) |&gt; 
  filter(data != &quot;&quot;) |&gt; 
  filter(!row_number() %in% c(1, 2, 51)) |&gt; 
  filter(!row_number() %in% c(1, 2, 10, 22, 33, 44)) |&gt; 
  mutate(data = str_squish(data)) |&gt; 
  mutate(data = str_remove_all(data, &quot;-&quot;)) |&gt; 
  mutate(data = str_squish(data)) |&gt; 
  separate(data, into = c(&quot;uhf&quot;, &quot;rest&quot;), sep = &quot;(?&lt;=\\d\\s)&quot;) |&gt; 
  separate(col = &quot;rest&quot;, into = c(&quot;neighborhood&quot;, &quot;zip&quot;), sep = &quot;(?=\\s\\d)&quot;, extra = &quot;merge&quot;) |&gt; 
  separate(col = &quot;zip&quot;, into = c(&quot;zip1&quot;, &quot;zip2&quot;, &quot;zip3&quot;, &quot;zip4&quot;, &quot;zip5&quot;, &quot;zip6&quot;, &quot;zip7&quot;, &quot;zip8&quot;, &quot;zip9&quot;), sep = &quot;,&quot;) |&gt; 
  mutate(across(everything(), ~ str_trim(.x))) |&gt; 
  mutate(across(c(&quot;zip1&quot;:&quot;zip9&quot;), ~ as.numeric(.x))) |&gt; 
  mutate(uhf = as.numeric(uhf)) |&gt; 
  pivot_longer(c(zip1:zip9), names_to = &quot;zip_name&quot;, values_to = &quot;zip&quot;) |&gt; 
  filter(!is.na(zip)) |&gt; 
  select(!zip_name)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>We imported and cleaned a dataframe that converted UFH 34 to zip
code.</li>
</ol>
<pre class="r"><code>uhf_34 = 
  pdf_text(&quot;data/geocoding/uhf34.pdf&quot;)

uhf_34_df =
  uhf_34 |&gt; 
  str_split(&quot;\n&quot;) |&gt;
  tibble() |&gt; 
  rename(&quot;data&quot; = &quot;str_split(uhf_34, \&quot;\\n\&quot;)&quot;) |&gt; 
  unnest(&quot;data&quot;) |&gt; 
  filter(data != &quot;&quot;) |&gt; 
  mutate(data = str_squish(data)) |&gt; 
  filter(!row_number() %in% c(1, 2, 7, 14, 18, 21, 24, 27, 28, 31, 32, 34, 35, 39, 40, 42, 43, 44, 45, 47, 48, 52, 53, 57, 61:75)) |&gt; 
  mutate(data = str_replace(data, &quot;Kingsbridge - Riverdale&quot;, &quot;101 Kingsbridge - Riverdale&quot;)) |&gt; 
  mutate(data = str_replace(data, &quot;Northeast Bronx&quot;, &quot;102 Northeast Bronx&quot;)) |&gt; 
  filter(!row_number() %in% c(1,2)) |&gt; 
  mutate(data = str_remove_all(data, &quot;-&quot;),
         data = str_squish(data), 
         data = str_trim(data)) |&gt;
  mutate(data = str_remove(data, &quot;(\\d)+$&quot;)) |&gt;
  mutate(data = str_remove(data, &quot;(\\d)+\\s$&quot;)) |&gt;
  separate(data, into = c(&quot;uhf34&quot;, &quot;neighborhood&quot;), sep = &quot;(?&lt;=\\d\\s)&quot;) |&gt; 
  mutate(uhf34 = as.numeric(str_trim(uhf34)),
         neighborhood = str_trim(neighborhood)) |&gt; 
  mutate(uhf2 = uhf34) |&gt; 
  separate_wider_position(uhf2, widths = c(&quot;1_uhf&quot; = 3, &quot;2_uhf&quot; = 3, &quot;3_uhf&quot; = 3), too_few = &quot;align_start&quot;) |&gt; 
  pivot_longer(c(&quot;1_uhf&quot;:&quot;3_uhf&quot;), names_to = &quot;uhf_name&quot;, values_to = &quot;uhf42&quot;) |&gt; 
  select(!uhf_name) |&gt; 
  mutate(uhf34 = as.numeric(uhf34),
         uhf42 = as.numeric(uhf42))</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Lastly we combined UFH 42 and UFH 34 dataframes.</li>
</ol>
<pre class="r"><code>joined_uhf_34_42 = 
  uhf_zip_df |&gt; 
  left_join(y = uhf_34_df, by = join_by(&quot;uhf&quot; == &quot;uhf42&quot;)) |&gt; 
  rename(&quot;uhf34_neighborhood&quot; = &quot;neighborhood.y&quot;, 
         &quot;uhf42_neighborhood&quot; = &quot;neighborhood.x&quot;, 
         &quot;uhf42&quot; = &quot;uhf&quot;)</code></pre>
<hr />
</div>
<div id="creating-one-final-dataframe" class="section level2">
<h2><span style="color: blue;">Creating One Final Dataframe</span></h2>
<p>Next we needed to merge the neighborhood crosswalk dataframe with the
citibike dataframe and each individual variable dataframe.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
