---
title: "Modeling Health Outcomes"
output: 
  html_document:
    toc: true
    toc_float: true
    theme: yeti
    code_folding: hide
css: styles.css
---

Before diving into understanding how [health metrics play into Citibike usage](Modeling.html),
we wanted to explore interactions among the health metrics themselves. 

* Note: Details on the datasources and how they were impored and cleaned can be found at [Data Sources](data_sources.html). Here, we'll just read in CSV's generated from those tidied dataframes! 

```{r setup, include=FALSE}
library(tidyverse)
library(mgcv)
library(modelr)
library(purrr)

knitr::opts_chunk$set(message = FALSE,
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)

```

## Load Data

### SDI Data

Let's remind ourselves what the SDI data looks like!

```{r sdi_import}
sdi_df = read_csv("../citibike_clean/sdi_clean.csv") 

head(sdi_df) |>
  knitr::kable()
```

### Overweight Data 

Let's remind ourselves what the overweight data looks like! 

```{r overweight_import}
overweight_df = read_csv("../citibike_clean/overweight_clean.csv") 

head(overweight_df) |>
  knitr::kable()

```

### Air Quality Data
```{r aq_import}
aq_df = read_csv("../citibike_clean/aq_clean.csv") |>
  rename(uhf34 = geo_join_id) |>
  select(-measure, -geo_type_name, -time_period, 
         -start_date, -message, -year)

head(aq_df) |>
  knitr::kable()
```


### Bring them all together
```{r combine}
data = read_csv("../citibike_clean/sdi_overweight_clean.csv") 

data = data |>
  left_join(y = aq_df,
            by = join_by(uhf34)) |>
  select(uhf34, uhf34_neighborhood, sdi_score, percent_overweight,
         name, data_value) |>
  rename(pm25 = data_value)

head(data) |>
  knitr::kable()

```


